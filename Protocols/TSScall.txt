{"name": "TSScall", "description": "This protocol calls TSSs from TSS profiling assays using TSScall (henriquesWidespreadTranscriptionalPausing2018a). It takes 3 inputs: FORWARD_BEDGRAPH, REVERSE_BEDGRAPH, CHROMOSOME_SIZES. FORWARD_BEDGRAPH and REVERSE_BEDGRAPH are bedGraph files describing the coverage of 5' ends from Start-seq reads at single-nucleotide resolution.  Stranded information is required. FORWARD_BEDGRAPH and REVERSE_BEDGRAPH describe the coverage for the forward (+) strand and the reverse (-) strand, respectively.\r\n\r\n5' end coverage may be calculated from an alignment in BAM format using the [samtools](http://www.htslib.org/) and [bedtools](http://bedtools.readthedocs.io/en/latest/) utility packages.\r\n\r\n```\r\nsamtools view -b -f 0x0040 BAM_FILE | bedtools genomecov -ibam - -bg -5 -strand + > FORWARD_BEDGRAPH\r\nsamtools view -b -f 0x0040 BAM_FILE | bedtools genomecov -ibam - -bg -5 -strand - > REVERSE_BEDGRAPH\r\n```\r\n\r\n`CHROMOSOME_SIZES` is a text file describing the size of each chromosome/contig in the reference genome.", "step": [{"software": "python", "parameter": "/fs/cbsuhy01/storage/ly349/projects/peakcalling/tools/TSScall/TSScall.py -a {{GENE_ANNOTATION}} --detail_file {{JobName}}.txt --cluster_bed {{JobName}}.cluster.bed {{JobName}}_TSS_plus.bedGraph {{JobName}}_TSS_minus.bedGraph chrom.size {{JobName}}.bed", "hash": "f4cf758bffd8ff00ff9c088388b1ddd2", "step_order": 2}, {"software": "bash", "parameter": "/fs/cbsuhy01/storage/ly349/projects/peakcalling/tools/TSScall/preprocessing.sh {{InputFile}} {{Layout}} {{JobName}}", "hash": "cfef19c70989317959a69ef2fe58b8ff", "step_order": 1}, {"software": "awk", "parameter": "'BEGIN{OFS=\"\\t\";FS=\"\\t\"}{if(NR>1) print $0}' {{JobName}}.bed > {{JobName}}_remove_trackinfo.bed", "hash": "c20df20239d98b51d73d60957e14df7f", "step_order": 3}, {"software": "awk", "parameter": "'BEGIN{OFS=\"\\t\";FS=\"\\t\"}{if(NR>1) print $0}' {{JobName}}.cluster.bed > {{JobName}}_remove_trackinfo.cluster.bed", "hash": "bb2b57bcb0d188d60552cc40c9f1c715", "step_order": 4}, {"software": "python", "parameter": "/fs/cbsuhy01/storage/ly349/projects/peakcalling/remote_debug/helpers/TSScall/TSScall_bidirectional_peaks.py --include-convergent --input {{JobName}}.txt --save-to {{JobName}}_bidirectional.bed", "hash": "1a94359cc2554165b2c5e3c6beb01e5c", "step_order": 5}], "reference": {}}